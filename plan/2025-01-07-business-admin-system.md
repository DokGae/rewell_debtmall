# ì—…ì²´ë³„ ì‚¬ì—…ì£¼ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶• ê³„íš

ì‘ì„±ì¼: 2025-01-07

## ğŸ¯ ëª©í‘œ
ë©”ì¸ ê´€ë¦¬ìê°€ ì—…ì²´ë³„ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³ , ì‚¬ì—…ì£¼ëŠ” ìƒí’ˆ ê´€ë¦¬ë§Œ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œ êµ¬ì¶•

## ğŸ“‹ êµ¬í˜„ ê³„íš

### 1. **ê¶Œí•œ êµ¬ì¡°**
- **ë©”ì¸ ê´€ë¦¬ì (Admin)**
  - âœ… ì—…ì²´ ìƒì„±/ìˆ˜ì •/ì‚­ì œ
  - âœ… ì—…ì²´ ë¡œê·¸ì¸ ì •ë³´(ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸) ì„¤ì • ë° ë³€ê²½
  - âœ… ëª¨ë“  ì—…ì²´ì˜ ëª¨ë“  ì •ë³´ ê´€ë¦¬
  - âœ… ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬

- **ì—…ì²´ ì‚¬ì—…ì£¼ (Business)**
  - âœ… ìì‹ ì˜ ì—…ì²´ ìƒí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ
  - âœ… ìƒí’ˆë³„ ê°€ê²© ì œì•ˆ í˜„í™© ë³´ê¸° (íšŸìˆ˜, ìµœê³ ê°€ë§Œ)
  - âŒ ì—…ì²´ ê¸°ë³¸ ì •ë³´ ìˆ˜ì • ë¶ˆê°€
  - âŒ ë‹¤ë¥¸ ì—…ì²´ ì ‘ê·¼ ë¶ˆê°€
  - âŒ êµ¬ë§¤ì ê°œì¸ì •ë³´ ì—´ëŒ ë¶ˆê°€

### 2. **ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½ì‚¬í•­**
```ruby
# ë§ˆì´ê·¸ë ˆì´ì…˜: AddAuthenticationToBusinesses
add_column :businesses, :encrypted_password, :string, null: false, default: ""
add_column :businesses, :reset_password_token, :string
add_column :businesses, :reset_password_sent_at, :datetime
add_column :businesses, :remember_created_at, :datetime
add_column :businesses, :sign_in_count, :integer, default: 0, null: false
add_column :businesses, :current_sign_in_at, :datetime
add_column :businesses, :last_sign_in_at, :datetime

add_index :businesses, :reset_password_token, unique: true
add_index :businesses, :email, unique: true
```

### 3. **ë©”ì¸ ê´€ë¦¬ì ì—…ì²´ ê´€ë¦¬ ê¸°ëŠ¥ ê°•í™”**
- **ì—…ì²´ ë“±ë¡ í¼** (`/admin/businesses/new`)
  - ê¸°ë³¸ ì •ë³´: ì´ë¦„, ì„¤ëª…, ì—°ë½ì²˜, ì£¼ì†Œ ë“±
  - ë¡œê·¸ì¸ ì •ë³´: ì´ë©”ì¼, ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸
  - ìƒíƒœ: í™œì„±í™”/ë¹„í™œì„±í™”
  
- **ì—…ì²´ ìˆ˜ì • í¼** (`/admin/businesses/:id/edit`)
  - ëª¨ë“  ì—…ì²´ ì •ë³´ ìˆ˜ì • ê°€ëŠ¥
  - ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê¸°ëŠ¥
  - ë¡œê·¸ì¸ ì°¨ë‹¨ ê¸°ëŠ¥ (ìƒíƒœë¥¼ inactiveë¡œ)

### 4. **URL êµ¬ì¡°**
```
# ë©”ì¸ ê´€ë¦¬ì
/admin                      â†’ ë©”ì¸ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
/admin/businesses           â†’ ì—…ì²´ ê´€ë¦¬
/admin/businesses/new       â†’ ì—…ì²´ ë“±ë¡ (ë¡œê·¸ì¸ ì •ë³´ í¬í•¨)
/admin/businesses/:id/edit  â†’ ì—…ì²´ ìˆ˜ì • (ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê°€ëŠ¥)

# ì—…ì²´ ì‚¬ì—…ì£¼
/[slug]/admin              â†’ ì—…ì²´ ë¡œê·¸ì¸ í˜ì´ì§€
/[slug]/admin/dashboard    â†’ ì—…ì²´ ëŒ€ì‹œë³´ë“œ
/[slug]/admin/products     â†’ ìƒí’ˆ ê´€ë¦¬
/[slug]/admin/products/new â†’ ìƒí’ˆ ë“±ë¡
```

### 5. **ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬ì¡°**

#### Admin ë„¤ì„ìŠ¤í˜ì´ìŠ¤
- `Admin::BusinessesController`
  - ì—…ì²´ CRUD + ë¹„ë°€ë²ˆí˜¸ ì„¤ì •/ë³€ê²½
  - Strong Parametersì— password ì¶”ê°€

#### Business ë„¤ì„ìŠ¤í˜ì´ìŠ¤
- `Business::BaseController`
  - URL slug ê²€ì¦
  - ë¡œê·¸ì¸í•œ ì—…ì²´ì™€ URL ì—…ì²´ ì¼ì¹˜ í™•ì¸
- `Business::SessionsController`
  - ì»¤ìŠ¤í…€ ë¡œê·¸ì¸ (slug ê¸°ë°˜)
- `Business::DashboardController`
  - ìƒí’ˆ í†µê³„ë§Œ í‘œì‹œ
- `Business::ProductsController`
  - ìƒí’ˆ CRUD (ìì‹ ì˜ ì—…ì²´ ìƒí’ˆë§Œ)

### 6. **Business ëª¨ë¸ ìˆ˜ì •**
```ruby
class Business < ApplicationRecord
  # Devise ëª¨ë“ˆ (registerable ì œì™¸ - ì‚¬ì—…ì£¼ëŠ” ì§ì ‘ ê°€ì… ë¶ˆê°€)
  devise :database_authenticatable, :recoverable, 
         :rememberable, :trackable, :validatable
  
  # ë¹„ë°€ë²ˆí˜¸ ì—†ì´ë„ ìƒì„± ê°€ëŠ¥ (ê´€ë¦¬ìê°€ ë‚˜ì¤‘ì— ì„¤ì •)
  validates :password, presence: true, on: :update
  
  # ë¡œê·¸ì¸ ê°€ëŠ¥ ì—¬ë¶€ ì²´í¬
  def active_for_authentication?
    super && status == 'active'
  end
end
```

### 7. **ë©”ì¸ ê´€ë¦¬ì ì—…ì²´ ê´€ë¦¬ í™”ë©´**
```ruby
# ì—…ì²´ ë“±ë¡/ìˆ˜ì • í¼ í•„ë“œ
- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜
  - ì—…ì²´ëª… (í•„ìˆ˜)
  - ì„¤ëª…
  - ì´ë©”ì¼ (ë¡œê·¸ì¸ìš©, í•„ìˆ˜)
  - ì „í™”ë²ˆí˜¸
  - ì£¼ì†Œ
  - ì´ ë¶€ì±„
  - ë§ˆê°ì¼
  
- ë¡œê·¸ì¸ ì •ë³´ ì„¹ì…˜
  - ì´ë©”ì¼ (ìë™ ì…ë ¥)
  - ë¹„ë°€ë²ˆí˜¸ (ë“±ë¡ ì‹œ í•„ìˆ˜, ìˆ˜ì • ì‹œ ì„ íƒ)
  - ë¹„ë°€ë²ˆí˜¸ í™•ì¸
  
- ìƒíƒœ ê´€ë¦¬
  - í™œì„±í™”/ë¹„í™œì„±í™” (ë¡œê·¸ì¸ ì°¨ë‹¨)
  - ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„ í‘œì‹œ
```

### 8. **ì‚¬ì—…ì£¼ ê´€ë¦¬ í˜ì´ì§€ ê¸°ëŠ¥**
- **ëŒ€ì‹œë³´ë“œ** (`/[slug]/admin/dashboard`)
  - ë“±ë¡ ìƒí’ˆ ìˆ˜
  - ì´ ê°€ê²© ì œì•ˆ ìˆ˜
  - ìƒí’ˆë³„ ì œì•ˆ í˜„í™© ì°¨íŠ¸
  - ìµœê·¼ ì œì•ˆ ë°›ì€ ìƒí’ˆ ëª©ë¡

- **ìƒí’ˆ ê´€ë¦¬** (`/[slug]/admin/products`)
  - ìƒí’ˆ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜)
  - ìƒí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ
  - ì´ë¯¸ì§€ ì—…ë¡œë“œ (ë“œë˜ê·¸ì•¤ë“œë¡­)
  - ì¹´í…Œê³ ë¦¬ ì„ íƒ
  - ì¬ê³  ê´€ë¦¬
  - ì œì•ˆ í˜„í™© ë³´ê¸° (íšŸìˆ˜, ìµœê³ ê°€ë§Œ)

### 9. **ë³´ì•ˆ ê°•í™”**
- ë¹„ë°€ë²ˆí˜¸ ì •ì±…: ìµœì†Œ 8ì, ì˜ë¬¸+ìˆ«ì ì¡°í•©
- ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì§€ì—° ì‹œê°„ ì¶”ê°€
- ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ: 30ë¶„ ë¬´í™œë™ ì‹œ ìë™ ë¡œê·¸ì•„ì›ƒ
- ë¹„í™œì„±í™”ëœ ì—…ì²´ëŠ” ë¡œê·¸ì¸ ë¶ˆê°€
- IP ê¸°ë°˜ ì ‘ì† ë¡œê·¸ ê¸°ë¡

### 10. **êµ¬í˜„ ìˆœì„œ**
1. Business í…Œì´ë¸”ì— Devise í•„ë“œ ì¶”ê°€ (ë§ˆì´ê·¸ë ˆì´ì…˜)
2. Business ëª¨ë¸ì— Devise ì„¤ì •
3. Admin::BusinessesController ìˆ˜ì • (ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬ ì¶”ê°€)
4. ì—…ì²´ë³„ admin ë¼ìš°íŠ¸ êµ¬ì„±
5. Business::BaseController ë° ì¸ì¦ ë¡œì§
6. ì—…ì²´ ë¡œê·¸ì¸ í˜ì´ì§€ êµ¬í˜„
7. ì—…ì²´ ëŒ€ì‹œë³´ë“œ êµ¬í˜„
8. ìƒí’ˆ CRUD êµ¬í˜„
9. ê¶Œí•œ ê²€ì¦ ë° ë³´ì•ˆ ê°•í™”
10. UI ìŠ¤íƒ€ì¼ë§ ë° í•œê¸€í™”

### 11. **í™”ë©´ ì˜ˆì‹œ**

#### ë©”ì¸ ê´€ë¦¬ì - ì—…ì²´ ë“±ë¡
```
ì—…ì²´ ì •ë³´
â”œâ”€ ì—…ì²´ëª…: [ë¦¬ì›°]
â”œâ”€ ì´ë©”ì¼: [rewell@example.com]
â”œâ”€ ë¹„ë°€ë²ˆí˜¸: [********]
â”œâ”€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸: [********]
â””â”€ ìƒíƒœ: [âœ“ í™œì„±í™”]
```

#### ì—…ì²´ ì‚¬ì—…ì£¼ - ë¡œê·¸ì¸
```
ë„ë©”ì¸.com/ë¦¬ì›°/admin

ë¦¬ì›° ê´€ë¦¬ì ë¡œê·¸ì¸
ì´ë©”ì¼: [___________]
ë¹„ë°€ë²ˆí˜¸: [___________]
[ë¡œê·¸ì¸]
```

### 12. **ì£¼ìš” ê³ ë ¤ì‚¬í•­**
- ë©”ì¸ ê´€ë¦¬ìì™€ ì—…ì²´ ì‚¬ì—…ì£¼ì˜ ê¶Œí•œ ëª…í™•íˆ ë¶„ë¦¬
- URL ê¸°ë°˜ ì—…ì²´ ì‹ë³„ë¡œ ì§ê´€ì ì¸ ì ‘ê·¼
- ì—…ì²´ ì‚¬ì—…ì£¼ëŠ” ìƒí’ˆ ê´€ë¦¬ì—ë§Œ ì§‘ì¤‘
- ë³´ì•ˆ ê°•í™”ë¡œ ì•ˆì „í•œ ì‹œìŠ¤í…œ êµ¬ì¶•