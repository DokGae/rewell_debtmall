<div class="max-w-2xl mx-auto">
  <h1 class="text-2xl font-bold mb-6">새 업체 등록</h1>
  
  <div class="card p-6">
    <%= form_with model: [:admin, @business], local: true do |f| %>
      <div class="space-y-4">
        <div>
          <%= f.label :name, "업체명", class: "block text-sm font-medium mb-1" %>
          <%= f.text_field :name, required: true, class: "w-full" %>
          <% if @business.errors[:name].any? %>
            <p class="text-red-500 text-sm mt-1"><%= @business.errors[:name].first %></p>
          <% end %>
        </div>
        
        <div>
          <%= f.label :description, "설명", class: "block text-sm font-medium mb-1" %>
          <%= f.text_area :description, rows: 3, class: "w-full" %>
          <% if @business.errors[:description].any? %>
            <p class="text-red-500 text-sm mt-1"><%= @business.errors[:description].first %></p>
          <% end %>
        </div>
        
        <div class="grid grid-cols-2 gap-4">
          <div>
            <%= f.label :email, "이메일 (로그인용)", class: "block text-sm font-medium mb-1" %>
            <%= f.email_field :email, required: true, class: "w-full" %>
            <% if @business.errors[:email].any? %>
              <p class="text-red-500 text-sm mt-1"><%= @business.errors[:email].first %></p>
            <% end %>
          </div>
          
          <div>
            <%= f.label :phone, "전화번호", class: "block text-sm font-medium mb-1" %>
            <%= f.telephone_field :phone, required: true, class: "w-full" %>
            <% if @business.errors[:phone].any? %>
              <p class="text-red-500 text-sm mt-1"><%= @business.errors[:phone].first %></p>
            <% end %>
          </div>
        </div>
        
        <div class="border-t pt-4 mt-4">
          <h3 class="text-lg font-semibold mb-4">로그인 정보</h3>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <%= label_tag :password, "비밀번호", class: "block text-sm font-medium mb-1" %>
              <%= password_field_tag "business[password]", nil, 
                  required: true, 
                  minlength: 8,
                  placeholder: "최소 8자 이상",
                  class: "w-full" %>
              <% if @business.errors[:password].any? %>
                <p class="text-red-500 text-sm mt-1"><%= @business.errors[:password].first %></p>
              <% end %>
            </div>
            
            <div>
              <%= label_tag :password_confirmation, "비밀번호 확인", class: "block text-sm font-medium mb-1" %>
              <%= password_field_tag "business[password_confirmation]", nil, 
                  required: true,
                  minlength: 8,
                  placeholder: "비밀번호 재입력",
                  class: "w-full" %>
              <% if @business.errors[:password_confirmation].any? %>
                <p class="text-red-500 text-sm mt-1"><%= @business.errors[:password_confirmation].first %></p>
              <% end %>
            </div>
          </div>
          
          <p class="text-sm text-zinc-400 mt-2">업체 관리자가 로그인할 때 사용할 비밀번호입니다.</p>
        </div>
        
        <div>
          <%= f.label :address, "주소", class: "block text-sm font-medium mb-1" %>
          <%= f.text_area :address, rows: 2, class: "w-full" %>
          <% if @business.errors[:address].any? %>
            <p class="text-red-500 text-sm mt-1"><%= @business.errors[:address].first %></p>
          <% end %>
        </div>
        
        <div class="grid grid-cols-2 gap-4">
          <div>
            <%= f.label :total_debt, "총 채무액", class: "block text-sm font-medium mb-1" %>
            <%= f.number_field :total_debt, min: 0, class: "w-full" %>
            <% if @business.errors[:total_debt].any? %>
              <p class="text-red-500 text-sm mt-1"><%= @business.errors[:total_debt].first %></p>
            <% end %>
          </div>
          
          <div>
            <%= f.label :status, "상태", class: "block text-sm font-medium mb-1" %>
            <%= f.select :status, options_for_select(Business.statuses.map {|key, value| [key.humanize, key]}, @business.status), {}, class: "w-full" %>
            <% if @business.errors[:status].any? %>
              <p class="text-red-500 text-sm mt-1"><%= @business.errors[:status].first %></p>
            <% end %>
          </div>
        </div>
        
        <div>
          <%= f.label :deadline, "마감일", class: "block text-sm font-medium mb-1" %>
          <div class="relative">
            <%= f.datetime_field :deadline, 
                class: "w-full datetime-input",
                step: 60 %>
          </div>
          <p class="text-sm text-zinc-400 mt-1">이 날짜 이후에는 상품 구매가 불가능합니다.</p>
          <% if @business.errors[:deadline].any? %>
            <p class="text-red-500 text-sm mt-1"><%= @business.errors[:deadline].first %></p>
          <% end %>
        </div>
        
        <style>
          /* datetime-local 입력 필드 스타일링 */
          .datetime-input {
            color-scheme: dark;
          }
          
          .datetime-input::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
            opacity: 0.8;
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            margin: 0;
            padding: 0;
            background: transparent;
          }
          
          .datetime-input::-webkit-calendar-picker-indicator:hover {
            opacity: 1;
          }
          
          /* Firefox 지원 */
          .datetime-input {
            position: relative;
          }
        </style>
        
        <div>
          <%= f.label :logo, "로고 이미지", class: "block text-sm font-medium mb-1" %>
          <%= f.file_field :logo, class: "w-full" %>
          <% if @business.errors[:logo].any? %>
            <p class="text-red-500 text-sm mt-1"><%= @business.errors[:logo].first %></p>
          <% end %>
        </div>
        
        <div class="flex gap-4 mt-6">
          <%= f.submit "업체 등록", class: "btn-primary cursor-pointer" %>
          <%= link_to "취소", admin_businesses_path, class: "btn-secondary" %>
        </div>
      </div>
    <% end %>
  </div>
</div>